{
  "handlers" : {
    "read" : {
      "permissions" : [ "sagemaker:DescribeUserProfile" ]
    },
    "create" : {
      "permissions" : [ "sagemaker:CreateUserProfile", "sagemaker:DescribeUserProfile", "sagemaker:DescribeImage", "sagemaker:DescribeImageVersion", "iam:PassRole" ]
    },
    "update" : {
      "permissions" : [ "sagemaker:UpdateUserProfile", "sagemaker:DescribeUserProfile", "sagemaker:DescribeImage", "sagemaker:DescribeImageVersion", "iam:PassRole" ]
    },
    "list" : {
      "permissions" : [ "sagemaker:ListUserProfiles" ]
    },
    "delete" : {
      "permissions" : [ "sagemaker:DeleteUserProfile", "sagemaker:DescribeUserProfile" ]
    }
  },
  "typeName" : "AWS::SageMaker::UserProfile",
  "readOnlyProperties" : [ "/properties/UserProfileArn" ],
  "description" : "Resource Type definition for AWS::SageMaker::UserProfile",
  "writeOnlyProperties" : [ "/properties/Tags" ],
  "createOnlyProperties" : [ "/properties/DomainId", "/properties/UserProfileName", "/properties/SingleSignOnUserIdentifier", "/properties/SingleSignOnUserValue", "/properties/UserSettings/RStudioServerProAppSettings/AccessStatus", "/properties/UserSettings/RStudioServerProAppSettings/UserGroup", "/properties/Tags" ],
  "additionalProperties" : false,
  "primaryIdentifier" : [ "/properties/UserProfileName", "/properties/DomainId" ],
  "definitions" : {
    "JupyterLabAppSettings" : {
      "description" : "The JupyterLab app settings.",
      "additionalProperties" : false,
      "type" : "object",
      "properties" : {
        "CustomImages" : {
          "minItems" : 0,
          "maxItems" : 30,
          "uniqueItems" : false,
          "description" : "A list of custom images available for use for JupyterLab apps",
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/CustomImage"
          }
        },
        "DefaultResourceSpec" : {
          "description" : "The default instance type and the Amazon Resource Name (ARN) of the default SageMaker image used by the JupyterLab app.",
          "$ref" : "#/definitions/ResourceSpec"
        },
        "LifecycleConfigArns" : {
          "minItems" : 0,
          "maxItems" : 30,
          "uniqueItems" : false,
          "description" : "A list of LifecycleConfigArns available for use with JupyterLab apps.",
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/StudioLifecycleConfigArn"
          }
        },
        "CodeRepositories" : {
          "minItems" : 0,
          "maxItems" : 30,
          "uniqueItems" : false,
          "description" : "A list of CodeRepositories available for use with JupyterLab apps.",
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/CodeRepository"
          }
        },
        "AppLifecycleManagement" : {
          "$ref" : "#/definitions/AppLifecycleManagement"
        }
      }
    },
    "MlTools" : {
      "type" : "string",
      "enum" : [ "DataWrangler", "FeatureStore", "EmrClusters", "AutoMl", "Experiments", "Training", "ModelEvaluation", "Pipelines", "Models", "JumpStart", "InferenceRecommender", "Endpoints", "Projects" ]
    },
    "KernelGatewayAppSettings" : {
      "description" : "The kernel gateway app settings.",
      "additionalProperties" : false,
      "type" : "object",
      "properties" : {
        "CustomImages" : {
          "minItems" : 0,
          "maxItems" : 30,
          "uniqueItems" : false,
          "description" : "A list of custom SageMaker images that are configured to run as a KernelGateway app.",
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/CustomImage"
          }
        },
        "DefaultResourceSpec" : {
          "description" : "The default instance type and the Amazon Resource Name (ARN) of the default SageMaker image used by the KernelGateway app.",
          "$ref" : "#/definitions/ResourceSpec"
        },
        "LifecycleConfigArns" : {
          "minItems" : 0,
          "maxItems" : 30,
          "uniqueItems" : false,
          "description" : "A list of LifecycleConfigArns available for use with KernelGateway apps.",
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/StudioLifecycleConfigArn"
          }
        }
      }
    },
    "CustomPosixUserConfig" : {
      "additionalProperties" : false,
      "type" : "object",
      "properties" : {
        "Uid" : {
          "maximum" : 4000000,
          "type" : "integer",
          "minimum" : 10000
        },
        "Gid" : {
          "maximum" : 4000000,
          "type" : "integer",
          "minimum" : 1001
        }
      },
      "required" : [ "Uid", "Gid" ]
    },
    "SpaceEbsVolumeSizeInGb" : {
      "maximum" : 16384,
      "type" : "integer",
      "minimum" : 5
    },
    "CodeEditorAppSettings" : {
      "description" : "The CodeEditor app settings.",
      "additionalProperties" : false,
      "type" : "object",
      "properties" : {
        "CustomImages" : {
          "minItems" : 0,
          "maxItems" : 30,
          "uniqueItems" : false,
          "description" : "A list of custom images for use for CodeEditor apps.",
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/CustomImage"
          }
        },
        "DefaultResourceSpec" : {
          "description" : "The default instance type and the Amazon Resource Name (ARN) of the default SageMaker image used by the CodeEditor app.",
          "$ref" : "#/definitions/ResourceSpec"
        },
        "LifecycleConfigArns" : {
          "minItems" : 0,
          "maxItems" : 30,
          "uniqueItems" : false,
          "description" : "A list of LifecycleConfigArns available for use with CodeEditor apps.",
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/StudioLifecycleConfigArn"
          }
        },
        "AppLifecycleManagement" : {
          "$ref" : "#/definitions/AppLifecycleManagement"
        }
      }
    },
    "StudioLifecycleConfigArn" : {
      "pattern" : "arn:aws[a-z\\-]*:sagemaker:[a-z0-9\\-]*:[0-9]{12}:studio-lifecycle-config/.*",
      "description" : "The Amazon Resource Name (ARN) of the Lifecycle Configuration to attach to the Resource.",
      "type" : "string",
      "maxLength" : 256
    },
    "CodeRepository" : {
      "additionalProperties" : false,
      "type" : "object",
      "properties" : {
        "RepositoryUrl" : {
          "pattern" : "^https://([.\\-_a-zA-Z0-9]+/?){3,1016}$",
          "description" : "A CodeRepository (valid URL) to be used within Jupyter's Git extension.",
          "type" : "string",
          "maxLength" : 256
        }
      },
      "required" : [ "RepositoryUrl" ]
    },
    "CustomFileSystemConfig" : {
      "additionalProperties" : false,
      "type" : "object",
      "properties" : {
        "EFSFileSystemConfig" : {
          "$ref" : "#/definitions/EFSFileSystemConfig"
        }
      }
    },
    "EFSFileSystemConfig" : {
      "additionalProperties" : false,
      "type" : "object",
      "properties" : {
        "FileSystemPath" : {
          "minLength" : 1,
          "pattern" : "^\\/\\S*$",
          "type" : "string",
          "maxLength" : 256
        },
        "FileSystemId" : {
          "minLength" : 11,
          "pattern" : "^(fs-[0-9a-f]{8,})$",
          "type" : "string",
          "maxLength" : 21
        }
      },
      "required" : [ "FileSystemId" ]
    },
    "UserSettings" : {
      "description" : "A collection of settings that apply to users of Amazon SageMaker Studio. These settings are specified when the CreateUserProfile API is called, and as DefaultUserSettings when the CreateDomain API is called.",
      "additionalProperties" : false,
      "type" : "object",
      "properties" : {
        "SecurityGroups" : {
          "minItems" : 0,
          "maxItems" : 5,
          "uniqueItems" : false,
          "description" : "The security groups for the Amazon Virtual Private Cloud (VPC) that Studio uses for communication.",
          "type" : "array",
          "items" : {
            "pattern" : "[-0-9a-zA-Z]+",
            "type" : "string",
            "maxLength" : 32
          }
        },
        "JupyterLabAppSettings" : {
          "$ref" : "#/definitions/JupyterLabAppSettings"
        },
        "KernelGatewayAppSettings" : {
          "description" : "The kernel gateway app settings.",
          "$ref" : "#/definitions/KernelGatewayAppSettings"
        },
        "StudioWebPortalSettings" : {
          "$ref" : "#/definitions/StudioWebPortalSettings"
        },
        "CustomFileSystemConfigs" : {
          "minItems" : 0,
          "maxItems" : 2,
          "uniqueItems" : true,
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/CustomFileSystemConfig"
          }
        },
        "CustomPosixUserConfig" : {
          "$ref" : "#/definitions/CustomPosixUserConfig"
        },
        "CodeEditorAppSettings" : {
          "$ref" : "#/definitions/CodeEditorAppSettings"
        },
        "RStudioServerProAppSettings" : {
          "$ref" : "#/definitions/RStudioServerProAppSettings"
        },
        "StudioWebPortal" : {
          "description" : "Indicates whether the Studio experience is available to users. If not, users cannot access Studio.",
          "type" : "string",
          "enum" : [ "ENABLED", "DISABLED" ]
        },
        "JupyterServerAppSettings" : {
          "description" : "The Jupyter server's app settings.",
          "$ref" : "#/definitions/JupyterServerAppSettings"
        },
        "DefaultLandingUri" : {
          "description" : "Defines which Amazon SageMaker application users are directed to by default.",
          "type" : "string",
          "maxLength" : 1023
        },
        "ExecutionRole" : {
          "minLength" : 20,
          "pattern" : "^arn:aws[a-z\\-]*:iam::\\d{12}:role/?[a-zA-Z_0-9+=,.@\\-_/]+$",
          "description" : "The user profile Amazon Resource Name (ARN).",
          "type" : "string",
          "maxLength" : 2048
        },
        "SpaceStorageSettings" : {
          "$ref" : "#/definitions/DefaultSpaceStorageSettings"
        },
        "SharingSettings" : {
          "description" : "The sharing settings.",
          "$ref" : "#/definitions/SharingSettings"
        }
      }
    },
    "ResourceSpec" : {
      "additionalProperties" : false,
      "type" : "object",
      "properties" : {
        "LifecycleConfigArn" : {
          "pattern" : "arn:aws[a-z\\-]*:sagemaker:[a-z0-9\\-]*:[0-9]{12}:studio-lifecycle-config/.*",
          "description" : "The Amazon Resource Name (ARN) of the Lifecycle Configuration to attach to the Resource.",
          "type" : "string",
          "maxLength" : 256
        },
        "SageMakerImageArn" : {
          "pattern" : "^arn:aws(-[\\w]+)*:sagemaker:.+:[0-9]{12}:image/[a-z0-9]([-.]?[a-z0-9])*$",
          "description" : "The ARN of the SageMaker image that the image version belongs to.",
          "type" : "string",
          "maxLength" : 256
        },
        "InstanceType" : {
          "description" : "The instance type that the image version runs on.",
          "type" : "string",
          "enum" : [ "system", "ml.t3.micro", "ml.t3.small", "ml.t3.medium", "ml.t3.large", "ml.t3.xlarge", "ml.t3.2xlarge", "ml.m5.large", "ml.m5.xlarge", "ml.m5.2xlarge", "ml.m5.4xlarge", "ml.m5.8xlarge", "ml.m5.12xlarge", "ml.m5.16xlarge", "ml.m5.24xlarge", "ml.c5.large", "ml.c5.xlarge", "ml.c5.2xlarge", "ml.c5.4xlarge", "ml.c5.9xlarge", "ml.c5.12xlarge", "ml.c5.18xlarge", "ml.c5.24xlarge", "ml.p3.2xlarge", "ml.p3.8xlarge", "ml.p3.16xlarge", "ml.g4dn.xlarge", "ml.g4dn.2xlarge", "ml.g4dn.4xlarge", "ml.g4dn.8xlarge", "ml.g4dn.12xlarge", "ml.g4dn.16xlarge", "ml.r5.large", "ml.r5.xlarge", "ml.r5.2xlarge", "ml.r5.4xlarge", "ml.r5.8xlarge", "ml.r5.12xlarge", "ml.r5.16xlarge", "ml.r5.24xlarge", "ml.p3dn.24xlarge", "ml.m5d.large", "ml.m5d.xlarge", "ml.m5d.2xlarge", "ml.m5d.4xlarge", "ml.m5d.8xlarge", "ml.m5d.12xlarge", "ml.m5d.16xlarge", "ml.m5d.24xlarge", "ml.g5.xlarge", "ml.g5.2xlarge", "ml.g5.4xlarge", "ml.g5.8xlarge", "ml.g5.12xlarge", "ml.g5.16xlarge", "ml.g5.24xlarge", "ml.g5.48xlarge", "ml.p4d.24xlarge", "ml.p4de.24xlarge", "ml.geospatial.interactive", "ml.trn1.2xlarge", "ml.trn1.32xlarge", "ml.trn1n.32xlarge" ]
        },
        "SageMakerImageVersionArn" : {
          "pattern" : "^arn:aws(-[\\w]+)*:sagemaker:.+:[0-9]{12}:image-version/[a-z0-9]([-.]?[a-z0-9])*/[0-9]+$",
          "description" : "The ARN of the image version created on the instance.",
          "type" : "string",
          "maxLength" : 256
        }
      }
    },
    "DefaultEbsStorageSettings" : {
      "description" : "Properties related to the Amazon Elastic Block Store volume.",
      "additionalProperties" : false,
      "type" : "object",
      "properties" : {
        "MaximumEbsVolumeSizeInGb" : {
          "description" : "Maximum size of the Amazon EBS volume in Gb. Must be greater than or equal to the DefaultEbsVolumeSizeInGb.",
          "$ref" : "#/definitions/SpaceEbsVolumeSizeInGb"
        },
        "DefaultEbsVolumeSizeInGb" : {
          "description" : "Default size of the Amazon EBS volume in Gb",
          "$ref" : "#/definitions/SpaceEbsVolumeSizeInGb"
        }
      },
      "required" : [ "DefaultEbsVolumeSizeInGb", "MaximumEbsVolumeSizeInGb" ]
    },
    "StudioWebPortalSettings" : {
      "description" : "Studio settings. If these settings are applied on a user level, they take priority over the settings applied on a domain level.",
      "additionalProperties" : false,
      "type" : "object",
      "properties" : {
        "HiddenAppTypes" : {
          "minItems" : 0,
          "uniqueItems" : true,
          "description" : "Applications supported in Studio that are hidden from the Studio left navigation pane.",
          "insertionOrder" : false,
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/AppType"
          }
        },
        "HiddenMlTools" : {
          "minItems" : 0,
          "uniqueItems" : true,
          "description" : "The machine learning tools that are hidden from the Studio left navigation pane.",
          "insertionOrder" : false,
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/MlTools"
          }
        }
      }
    },
    "RStudioServerProAppSettings" : {
      "description" : "A collection of settings that configure user interaction with the RStudioServerPro app.",
      "additionalProperties" : false,
      "type" : "object",
      "properties" : {
        "AccessStatus" : {
          "description" : "Indicates whether the current user has access to the RStudioServerPro app.",
          "type" : "string",
          "enum" : [ "ENABLED", "DISABLED" ]
        },
        "UserGroup" : {
          "description" : "The level of permissions that the user has within the RStudioServerPro app. This value defaults to User. The Admin value allows the user access to the RStudio Administrative Dashboard.",
          "type" : "string",
          "enum" : [ "R_STUDIO_ADMIN", "R_STUDIO_USER" ]
        }
      }
    },
    "CustomImage" : {
      "description" : "A custom SageMaker image.",
      "additionalProperties" : false,
      "type" : "object",
      "properties" : {
        "ImageName" : {
          "pattern" : "^[a-zA-Z0-9]([-.]?[a-zA-Z0-9]){0,62}$",
          "description" : "The name of the CustomImage. Must be unique to your account.",
          "type" : "string",
          "maxLength" : 63
        },
        "AppImageConfigName" : {
          "pattern" : "^[a-zA-Z0-9](-*[a-zA-Z0-9]){0,62}",
          "description" : "The Name of the AppImageConfig.",
          "type" : "string",
          "maxLength" : 63
        },
        "ImageVersionNumber" : {
          "description" : "The version number of the CustomImage.",
          "type" : "integer",
          "minimum" : 0
        }
      },
      "required" : [ "AppImageConfigName", "ImageName" ]
    },
    "JupyterServerAppSettings" : {
      "description" : "The JupyterServer app settings.",
      "additionalProperties" : false,
      "type" : "object",
      "properties" : {
        "DefaultResourceSpec" : {
          "$ref" : "#/definitions/ResourceSpec"
        },
        "LifecycleConfigArns" : {
          "minItems" : 0,
          "maxItems" : 30,
          "uniqueItems" : false,
          "description" : "A list of LifecycleConfigArns available for use with JupyterServer apps.",
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/StudioLifecycleConfigArn"
          }
        }
      }
    },
    "Tag" : {
      "additionalProperties" : false,
      "type" : "object",
      "properties" : {
        "Value" : {
          "minLength" : 1,
          "type" : "string",
          "maxLength" : 128
        },
        "Key" : {
          "minLength" : 1,
          "type" : "string",
          "maxLength" : 128
        }
      },
      "required" : [ "Key", "Value" ]
    },
    "AppType" : {
      "type" : "string",
      "enum" : [ "JupyterServer", "TensorBoard", "RStudioServerPro", "JupyterLab", "CodeEditor", "DetailedProfiler", "Canvas" ]
    },
    "DefaultSpaceStorageSettings" : {
      "description" : "Default storage settings for a space.",
      "additionalProperties" : false,
      "type" : "object",
      "properties" : {
        "DefaultEbsStorageSettings" : {
          "$ref" : "#/definitions/DefaultEbsStorageSettings"
        }
      }
    },
    "SharingSettings" : {
      "description" : "Specifies options when sharing an Amazon SageMaker Studio notebook. These settings are specified as part of DefaultUserSettings when the CreateDomain API is called, and as part of UserSettings when the CreateUserProfile API is called.",
      "additionalProperties" : false,
      "type" : "object",
      "properties" : {
        "NotebookOutputOption" : {
          "description" : "Whether to include the notebook cell output when sharing the notebook. The default is Disabled.",
          "type" : "string",
          "enum" : [ "Allowed", "Disabled" ]
        },
        "S3KmsKeyId" : {
          "pattern" : ".*",
          "description" : "When NotebookOutputOption is Allowed, the AWS Key Management Service (KMS) encryption key ID used to encrypt the notebook cell output in the Amazon S3 bucket.",
          "type" : "string",
          "maxLength" : 2048
        },
        "S3OutputPath" : {
          "pattern" : "^(https|s3)://([^/]+)/?(.*)$",
          "description" : "When NotebookOutputOption is Allowed, the Amazon S3 bucket used to store the shared notebook snapshots.",
          "type" : "string",
          "maxLength" : 1024
        }
      }
    }
  },
  "properties" : {
    "DomainId" : {
      "minLength" : 1,
      "description" : "The ID of the associated Domain.",
      "type" : "string",
      "maxLength" : 63
    },
    "SingleSignOnUserValue" : {
      "minLength" : 1,
      "description" : "The username of the associated AWS Single Sign-On User for this UserProfile. If the Domain's AuthMode is SSO, this field is required, and must match a valid username of a user in your directory. If the Domain's AuthMode is not SSO, this field cannot be specified.",
      "type" : "string",
      "maxLength" : 256
    },
    "UserSettings" : {
      "minItems" : 0,
      "maxItems" : 50,
      "uniqueItems" : false,
      "description" : "A collection of settings.",
      "$ref" : "#/definitions/UserSettings"
    },
    "UserProfileArn" : {
      "pattern" : "arn:aws[a-z\\-]*:sagemaker:[a-z0-9\\-]*:[0-9]{12}:user-profile/.*",
      "description" : "The user profile Amazon Resource Name (ARN).",
      "type" : "string",
      "maxLength" : 256
    },
    "SingleSignOnUserIdentifier" : {
      "pattern" : "UserName",
      "description" : "A specifier for the type of value specified in SingleSignOnUserValue. Currently, the only supported value is \"UserName\". If the Domain's AuthMode is SSO, this field is required. If the Domain's AuthMode is not SSO, this field cannot be specified.",
      "type" : "string"
    },
    "UserProfileName" : {
      "minLength" : 1,
      "description" : "A name for the UserProfile.",
      "type" : "string",
      "maxLength" : 63
    },
    "Tags" : {
      "minItems" : 0,
      "maxItems" : 50,
      "uniqueItems" : false,
      "description" : "A list of tags to apply to the user profile.",
      "type" : "array",
      "items" : {
        "$ref" : "#/definitions/Tag"
      }
    }
  },
  "required" : [ "DomainId", "UserProfileName" ]
}